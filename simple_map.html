<!DOCTYPE html>
<html>
<head>
    <title>Location Map - 1,248 Analyzed Locations</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .header { background: #2563eb; color: white; padding: 20px; text-align: center; }
        #map { height: 80vh; width: 100%; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Pattern Discovery App: 1,248 Analyzed Locations</h1>
        <p>Minnesota: 1,200 (96.2%) | International: 31 (2.5%) | Florida: 13 (1.0%) | California: 4 (0.3%)</p>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        console.log('Starting map initialization...');
        
        // Initialize map
        var map = L.map('map').setView([40.0, -95.0], 4);
        console.log('Map object created');

        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);
        console.log('Tile layer added');

        // Location data
        var locations = [
            {lat: 44.9806, lng: -93.2905, name: 'Minneapolis Core', count: 400, color: '#22c55e'},
            {lat: 44.9800, lng: -93.2893, name: 'Default Location Hub', count: 350, color: '#22c55e'},
            {lat: 44.9438, lng: -92.8895, name: 'Eastern Suburbs', count: 150, color: '#22c55e'},
            {lat: 44.9484, lng: -93.2196, name: 'South Minneapolis', count: 100, color: '#22c55e'},
            {lat: 44.8825, lng: -93.2114, name: 'Southern Metro', count: 75, color: '#22c55e'},
            {lat: 45.0872, lng: -93.1122, name: 'Northern Suburbs', count: 125, color: '#22c55e'},
            {lat: -23.5453, lng: -46.6517, name: 'São Paulo, Brazil', count: 31, color: '#ef4444'},
            {lat: 28.4264, lng: -81.2990, name: 'Orlando Area', count: 13, color: '#3b82f6'},
            {lat: 37.7749, lng: -122.4194, name: 'San Francisco', count: 4, color: '#f59e0b'}
        ];

        // Add markers
        locations.forEach(function(loc, index) {
            console.log('Adding marker ' + (index + 1) + ': ' + loc.name);
            var radius = Math.max(8, Math.min(30, loc.count / 15));
            
            var marker = L.circleMarker([loc.lat, loc.lng], {
                radius: radius,
                fillColor: loc.color,
                color: loc.color,
                weight: 2,
                opacity: 1,
                fillOpacity: 0.7
            });
            
            marker.bindPopup('<b>' + loc.name + '</b><br>Locations: ' + loc.count + '<br>Coordinates: ' + loc.lat + ', ' + loc.lng);
            marker.addTo(map);
        });

        console.log('Map loaded successfully with ' + locations.length + ' locations');
        
        // Add some debugging
        map.on('load', function() {
            console.log('Map load event fired');
        });
        
        map.on('locationfound', function(e) {
            console.log('Location found:', e);
        });
        
        map.on('locationerror', function(e) {
            console.log('Location error:', e);
        });
    </script>
</body>
</html>